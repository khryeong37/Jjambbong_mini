<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>ATOM vs ATOMONE — Price & Activity (7D, index=100)</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    .help-btn {
      position: relative;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 2px solid var(--white);
      background: transparent;
      color: var(--white);

      cursor: pointer;
      font-weight: 800;
      font-family: inherit;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;

      transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
    }

    .help-btn:hover {
      background: var(--gray100);
      border-color: var(--white);
      color: var(--white);
    }

    .help-btn.is-open {
      background: var(--white);
      border-color: var(--white);
      color: var(--bg);
    }

    .help-popover {
      position: absolute;
      top: 36px;
      right: 0;
      justify-content: flex-start;
      text-align: left;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.15s ease;
      z-index: 100;
    }

    .help-popover.open {
      visibility: visible;
      opacity: 1;
    }

    .help-content {
      width: 360px;
      background: var(--bg);
      color: var(--white);
      border: 3px solid var(--gray100);
      padding: 36px 24px;
      font: var(--caption02-r-16);
      line-height: 1.3;
      z-index: 50;
    }
  </style>

  <style>
    :root {
      /* Color tokens - UI*/
      --bg: #070015;
      --white: #ffffff;
      --primary100: #BD9BFF;
      --primary500: #7028FF;
      --gray100: #C1BFC6;
      --primaryo40: rgba(189, 155, 255, 0.40);

      /* Color tokens - Data Visualization*/
      --atom: #6C8CFF;
      --atom-o40: rgba(108, 140, 255, 0.40);
      --atomone: #FF6C6C;
      --atomone-o40: rgba(255, 108, 108, 0.40);

      /* Typography tokens */
      --font-family: 'Noto Sans', sans-serif;
      --title01-b-32: 800 32px/135% var(--font-family);
      --title02-sb-24: 700 24px/135% var(--font-family);
      --body01-sb-16: 700 16px/135% var(--font-family);
      --caption01-r-24: 400 24px/130% var(--font-family);
      --caption02-r-16: 400 16px/130% var(--font-family);
    }

    html,
    body {
      height: 100%;
    }

    body {
      font-family: 'Noto Sans', sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--white);
    }

    .wrap {
      max-width: 1920px;
      margin: 0 auto;
      padding: 36px 32px 16px;
    }

    #chart {
      height: 78vh;
    }

    .title {
      white-space: nowrap;
      font: var(--title01-b-32);
    }

    .controls {
      font: --body01-sb-16;
      display: flex;
      align-items: center;
      gap: 20px;
      padding-left: 80px;
      padding-right: 52px;
      margin-bottom: 12px;

      position: relative;
    }

    .range-buttons {
      display: flex;
      gap: 16px;
    }

    .btn {
      border: 0;
      padding: 8px 12px;
      border-radius: 4px;
      background: var(--primary100);
      color: var(--white);
      font: --body01-sb-16;
      cursor: pointer;
      text-transform: lowercase;
    }

    .btn.active {
      background: var(--primary500);
    }

    .btn:hover {
      background: rgba(255, 255, 255, 0.16);
    }

    .spacer {
      flex: 1 1 auto;
    }

    .switch {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font: --body01-sb-16;
      color: var(--white);
      user-select: none;
    }

    .switch input {
      display: none;
    }

    .toggle {
      width: 48px;
      height: 24px;
      border-radius: 999px;
      position: relative;
      background: var(--gray100);
      transition: var(--bg) 0.18s ease;
      color: var(--white);
      font: var(--body01-sb-16);
    }

    .toggle::before {
      content: "✔";
      position: absolute;
      left: 8px;
      top: 1px;
      font: var(--body01-sb-16);
      color: var(--white);
      opacity: 0;
      transition: opacity 0.18s ease;
    }

    .knob {
      position: absolute;
      top: 3px;
      left: 3px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: white;
      transition: left 0.18s ease;
    }

    .switch input:checked+.toggle {
      background: var(--primary500);
    }

    .switch input:checked+.toggle::before {
      opacity: 1;
    }

    .switch input:checked+.toggle .knob {
      left: 27px;
    }

    #chart {
      width: 100%;
      height: 78vh;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1 class="title">
      ATOM vs ATOMONE – Price (lines, left) + Volume (area) & Tx (bars, right)
      — 7d rolling, index=100
    </h1>

    <!-- 상단 컨트롤 -->
    <div class="controls">
      <div class="range-buttons">
        <button class="btn" data-range="30d">30d</button>
        <button class="btn" data-range="90d">90d</button>
        <button class="btn" data-range="180d">180d</button>
        <button class="btn active" data-range="all">all</button>
      </div>
      <div class="spacer"></div>
      <label class="switch">
        <input id="logToggle" type="checkbox" />
        <span class="toggle"><span class="knob"></span></span>
        <span>Log scale</span>
      </label>
      <button id="helpBtn" class="help-btn" aria-haspopup="true" aria-expanded="false">
        ?
        <div id="helpPopover" class="help-popover" role="dialog" aria-modal="false">
          <div class="help-content">
            On:<br />Log scale<br />
            Compresses large values → makes small changes visible.<br /><br />
            Off:<br />Linear scale<br />
            Shows values in actual proportions.
          </div>
        </div>
      </button>

    </div>

    <div id="chart"></div>
  </div>

  <!-- 우리 스크립트 -->
  <script type="module" src="./scripts/visualization.js"></script>
</body>

</html>